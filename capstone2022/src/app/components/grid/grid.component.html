<app-loader [isLoaded]="isLoaded"></app-loader>

<ng-container *ngIf="requestList">
  <table>
    <thead>
      <tr>
        <th></th>
        <th>Request ID</th>
        <th>Name</th>
        <th>Type</th>
        <th>Department</th>
        <th>Position</th>
        <th>Quantity</th>
        <th>Created on</th>
        <th>Deadline</th>
        <th>HR in change</th>
        <th>Status</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <ng-container
        *ngFor="
          let request of requestList
            | paginate
              : {
                  itemsPerPage: itemsPerPage,
                  currentPage: page,
                  totalItems: totalItems
                }
        "
      >
        <tr #clicked level="1" (click)="getSelectedRQ(request, clicked)">
          <td level="1"><input type="checkbox" [value]="request.id" /></td>
          <td level="1">{{ request.code }}</td>
          <td level="1">{{ request.name }}</td>
          <td level="1">{{ request.requestLevel }}</td>
          <td level="1">{{ request.department }}</td>
          <td level="1">{{ request.position }}</td>
          <td level="1">{{ request.quantity }}</td>
          <td level="1">{{ request.createdOn }}</td>
          <td level="1">{{ request.deadline }}</td>
          <td level="1">{{ request.hrInchange }}</td>
          <td level="1">
            <p
              [ngClass]="{
                draft: request.statusID === 1,
                submitted: request.statusID === 2,
                cancel: request.statusID === 3,
                approved: request.statusID === 4,
                reject: request.statusID === 5||0
              }"
            >
              {{ request.status | lowercase }}
            </p>
          </td>
          <td>
            <i
              (click)="toggleChildren(clicked, request.id, $event)"
              class="fas fa-angle-down"
            ></i>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
  <pagination-controls
    class="pagi"
    (pageChange)="gty((page = $event))"
  ></pagination-controls>
</ng-container>
